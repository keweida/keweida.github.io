(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c05edd5c"],{"7f7f":function(t,e,n){var i=n("86cc").f,a=Function.prototype,r=/^\s*function ([^ (]*)/,c="name";c in a||n("9e1e")&&i(a,c,{configurable:!0,get:function(){try{return(""+this).match(r)[1]}catch(t){return""}}})},"8a6a":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"user-info-container"},[n("van-nav-bar",{attrs:{title:"个人信息","left-arrow":"",fixed:""},on:{"click-left":t.onClickLeft,"click-right":t.onClickRight}},[n("template",{slot:"right"},[n("span",{staticStyle:{color:"#fff"}},[t._v("保存")])])],2),n("van-cell-group",{staticClass:"user-info"},[n("van-cell",{attrs:{"is-link":"",title:"头像"},on:{click:function(e){t.isDialogShow=!0}}},[n("template",{slot:"default"},[n("van-image",{attrs:{width:"35",height:"35",round:"",src:t.user.photo}})],1)],2),n("van-cell",{attrs:{"is-link":"",title:"昵称",value:t.user.name},on:{click:function(e){t.isNicknameShow=!0}}}),n("van-cell",{attrs:{"is-link":"",title:"介绍",value:"内容"}}),n("van-cell",{attrs:{"is-link":"",title:"性别",value:"内容"}}),n("van-cell",{attrs:{"is-link":"",title:"生日",value:"内容"}})],1),n("van-popup",{staticClass:"nickname-show",style:{height:"30%"},attrs:{position:"bottom"},model:{value:t.isNicknameShow,callback:function(e){t.isNicknameShow=e},expression:"isNicknameShow"}},[n("van-cell",{attrs:{title:"设置用户昵称"}}),n("van-cell",[n("van-field",{staticClass:"nickname",attrs:{placeholder:"请输入用户昵称"},model:{value:t.user.name,callback:function(e){t.$set(t.user,"name",e)},expression:"user.name"}})],1),n("van-cell",[n("div",{staticClass:"btn"},[n("van-button",{attrs:{type:"primary",round:"",size:"small"},on:{click:t.editUserProfile}},[t._v("修改")]),n("van-button",{attrs:{type:"danger",round:"",size:"small"}},[t._v("取消")])],1)])],1),n("upflie",{on:{changemyimg:t.changemyimg},model:{value:t.isDialogShow,callback:function(e){t.isDialogShow=e},expression:"isDialogShow"}})],1)},a=[],r=(n("7f7f"),n("96cf"),n("3b8d")),c=n("c24f"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("van-dialog",{attrs:{value:t.value,title:"标题",showCancelButton:!1,showConfirmButton:!1},on:{input:function(e){return t.$emit("input",e)}}},[n("van-cell-group",[n("van-cell",{attrs:{title:"从像册中选择"},on:{click:t.openFile}},[n("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"myfile",attrs:{type:"file"}})]),n("van-cell",{attrs:{title:"拍照"}}),n("van-cell",{attrs:{title:"取消"},on:{click:function(e){return t.$emit("input",!1)}}})],1)],1)},s=[],l=n("28a2"),u={data:function(){return{show:!0}},methods:{openFile:function(){var t=this;this.file.onchange=function(){var e=t.file.files[0],n=new FileReader;n.addEventListener("load",(function(e){Object(l["a"])({images:[e.target.result],onClose:function(){t.$dialog.confirm({title:"提示",message:"是否需要将当前图片保存为头像"}).then(Object(r["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["a"])({photo:t.file.files[0]});case 2:n=e.sent,t.$emit("changemyimg",n),t.$toast.success("头像修改成功");case 5:case"end":return e.stop()}}),e)}))))}}),t.$emit("input",!1)})),n.readAsDataURL(e)},this.file.click()}},props:["value"],computed:{file:function(){return this.$refs.myfile}}},f=u,h=n("2877"),m=Object(h["a"])(f,o,s,!1,null,null,null),v=m.exports,p={data:function(){return{isNicknameShow:!1,isDialogShow:!1,user:{}}},methods:{onClickLeft:function(){this.$router.back()},onClickRight:function(){},changemyimg:function(){},getUserInfo:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["d"])();case 2:e=t.sent,this.user=e;case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),editUserProfile:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(c["b"])({name:this.user.name});case 3:this.$toast.success("修改用户名成功"),t.next=10;break;case 6:t.prev=6,t.t0=t["catch"](0),console.log(t.t0),this.$toast.fail("系统异常");case 10:return t.prev=10,this.isNicknameShow=!1,t.finish(10);case 13:case"end":return t.stop()}}),t,this,[[0,6,10,13]])})));function e(){return t.apply(this,arguments)}return e}()},created:function(){this.getUserInfo()},components:{upflie:v}},d=p,g=(n("c313"),Object(h["a"])(d,i,a,!1,null,"20c74020",null));e["default"]=g.exports},c24f:function(t,e,n){"use strict";n.d(e,"e",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"d",(function(){return c})),n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return s}));n("7f7f");var i=n("b775");function a(t){var e=t.mobile,n=t.code;return Object(i["a"])({method:"POST",url:"v1_0/authorizations",data:{mobile:e,code:n}})}function r(t){return Object(i["a"])({method:"POST",url:"/v1_0/user/followings",data:{target:t}})}function c(){return Object(i["a"])({method:"GET",url:"/v1_0/user"})}function o(t){var e=t.name;return Object(i["a"])({method:"PATCH",url:"/v1_0/user/profile",data:{name:e}})}function s(t){var e=t.photo,n=new FormData;return n.append("photo",e),Object(i["a"])({method:"PATCH",url:"/v1_0/user/photo",data:n})}},c313:function(t,e,n){"use strict";var i=n("cd8c"),a=n.n(i);a.a},cd8c:function(t,e,n){}}]);
//# sourceMappingURL=chunk-c05edd5c.35c3fbdd.js.map